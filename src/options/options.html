<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <script type="module" src="/lib/browser-polyfill.min.js"></script>
        <script type="module" src="./options.js"></script>
        <style>
            .panel {
                padding: 2em;
            }

            .subpanel {
                margin-top: 1em;
                margin-left: 3em;
                margin-bottom: 2em;
            }

            .group:not(:last-child) {
                margin-bottom: 1em;
            }

            textarea, .textinput {
                width: 100%;
            }

            #cached-messages {
                margin-top: 0.5em;
            }

            textarea {
                resize: vertical;
                font-family: monospace;
                height: 500px;
            }

            label {
                vertical-align: middle;
            }

            .hidden {
                display: none;
            }

            .important {
                color: #aa2222;
            }

            .spacer {
                height: 1em;
            }
        </style>
    </head>
    <body>
        <div class="panel browser-style">
            <div class=group>
                <h2>General settings</h2>
            </div>

            <div class="group browser-style">
                <input id=sync name=sync type=checkbox>
                <label for=sync>Synchronize settings across devices (if supported by the browser)</label>
            </div>
            
            <div class="group browser-style">
                <label for=prefix>Shortcut prefix</label><br>
                <input class="browser-style textinput" id=prefix name=prefix type=text>
            </div>

            <div class="group browser-style">
                <label for=postpone>Postpone button</label><br>
                <input id=postponeHide name=postpone type=radio><label for=postponeHide>Hide the Postpone button</label><br>
                <input id=postponeWarn name=postpone type=radio><label for=postponeWarn>Show a warning when clicking the Postpone button</label><br>
                <input id=postponeNone name=postpone type=radio><label for=postponeNone>Postpone the issue immediately when clicking the Postpone button</label><br>
            </div>

            <div class=spacer></div>

            <div class=group>
                <h2>Message source</h2>
            </div>

            <input id=remote name=msgsource type=radio><label for=remote>Use messages from an URL</label><br>
            <div id=remote-subpanel class="subpanel browser-style">
                <div class="group browser-style">
                    <label for=url>Message update URL</label><br>
                    <input class="browser-style textinput" id=url name=url type=text>
                </div>
                <div class="group browser-style">
                    <input id=auto-update name=auto-update type=checkbox>
                    <label for=auto-update>
                        Automatically check for message updates every
                            <input class=browser-style id=auto-update-interval name=auto-update-interval type=number size=5 min=1>
                        minutes
                    </label>
                </div>
                <div class="group browser-style">
                    <button id="check-for-updates" class=browser-style>Check for updates</button>
                    <small>
                        Last checked
                        <span id="last-checked-date">[unknown]</span>
                        / Last updated
                        <span id="last-updated-date">[unknown]</span>
                    </small>
                </div>
                <div class="group browser-style">
                    Last cached messages
                    <textarea class="browser-style" id="cached-messages" readonly="readonly"></textarea>
                </div>
            </div>
            <input id=custom name=msgsource type=radio><label for=custom>Use custom messages</label><br>
            <div id=custom-subpanel class="subpanel browser-style">
                You can use a custom message configuration here. This must be the JSON representation of the <code><a href="https://github.com/mojira/helper-messages/blob/master/assets/messages.yml">messages.yml</a></code> file.
                <span class="important">However, please note that changing this setting may prevent the extension from working correctly if it is not properly formatted.</span><br><br>
                <textarea class=browser-style id=custom-messages></textarea><br>
                <button class=browser-style id=save-custom-messages>Save custom messages</button><br>
                <small id="custom-messages-feedback" class="hidden">test</small>
            </div>

            <div class=spacer></div>

            <div class=group>
                <h2>Advanced settings</h2>
            </div>

            <div class="group browser-style">
                <input id=commit-updates name=commit-updates type=checkbox>
                <label for=commit-updates>Enable commit updates</label><br>
            </div>
            <div id=commit-subpanel class="subpanel browser-style">
                <div class="group browser-style">
                    <label for=commit-url>Commits URL</label><br>
                    <input class="browser-style textinput" id=commit-url name=commit-url type=text>
                </div>
                <div class="group browser-style">
                    <label for=last-commit>Last commit SHA (default: "none")</label><br>
                    <input class="browser-style textinput" id=last-commit name=last-commit type=text>
                </div>
            </div>
        </div>
    </body>
</html>